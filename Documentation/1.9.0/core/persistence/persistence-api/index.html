<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2016-07-01 
 | Rendered using Apache Maven Fluido Skin 1.4
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160701" />
    <meta http-equiv="Content-Language" content="en" />
    <title>nazgul-core-persistence-api &#x2013; Nazgul Core: Persistence API</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.4.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.4.min.js"></script>

                          
        
<link rel="stylesheet" href="http://alexgorbatchev.com/pub/sh/current/styles/shThemeDefault.css" type="text/css"/>
                      
        
<link rel="stylesheet" href="http://alexgorbatchev.com/pub/sh/current/styles/shCore.css" type="text/css"/>
                      
        
<script src="http://alexgorbatchev.com/pub/sh/current/scripts/shCore.js" type="text/javascript"></script>
                      
        
<script src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushJava.js" type="text/javascript"></script>
                      
        
<script src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushJScript.js" type="text/javascript"></script>
                      
        
<script src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushXml.js" type="text/javascript"></script>
          
                  </head>
        <body class="topBarDisabled">
          
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2><span style="color: #777777;">nazgul-core-persistence-api</span></h2>
                </div>
                      </div>
        <div class="pull-right">              <div id="bannerRight">
                <h2>Nazgul Framework: Core</h2>
                </div>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="projectVersion">Version: 1.9.0
                    </li>
              
                
                    
                  <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2016-07-01</li>
            
                                    
    <li class="pull-right">
        <span class="divider">|</span>
                      <a href="http://bitbucket.org/lennartj" class="externalLink" title="Bitbucket">
        Bitbucket</a>
      </li>

  
    <li class="pull-right">
                      <a href="http://maven.apache.org/" class="externalLink" title="Maven">
        Maven</a>
      </li>

                    </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Overview</li>
                              
      <li class="active">
  
            <a href="#"><span class="none"></span>Introduction</a>
          </li>
                                                                                <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                                      
      <li>
  
                          <a href="project-info.html" title="Project Information">
          <span class="icon-chevron-right"></span>
        Project Information</a>
                  </li>
                                                                                                                                                                                                                                                                
      <li>
  
                          <a href="project-reports.html" title="Project Reports">
          <span class="icon-chevron-down"></span>
        Project Reports</a>
                    <ul class="nav nav-list">
                    
      <li class="active">
  
            <a href="#"><span class="none"></span>AspectJ Report</a>
          </li>
                    
      <li>
  
                          <a href="apidocs/index.html" title="JavaDocs">
          <span class="none"></span>
        JavaDocs</a>
            </li>
                    
      <li>
  
                          <a href="testapidocs/index.html" title="Test JavaDocs">
          <span class="none"></span>
        Test JavaDocs</a>
            </li>
                    
      <li>
  
                          <a href="xref/index.html" title="Source Xref">
          <span class="none"></span>
        Source Xref</a>
            </li>
                    
      <li>
  
                          <a href="xref-test/index.html" title="Test Source Xref">
          <span class="none"></span>
        Test Source Xref</a>
            </li>
                    
      <li>
  
                          <a href="cobertura/index.html" title="Cobertura Test Coverage">
          <span class="none"></span>
        Cobertura Test Coverage</a>
            </li>
                    
      <li>
  
                          <a href="findbugs.html" title="FindBugs">
          <span class="none"></span>
        FindBugs</a>
            </li>
                    
      <li>
  
                          <a href="clirr-report.html" title="Clirr">
          <span class="none"></span>
        Clirr</a>
            </li>
                    
      <li>
  
                          <a href="property-updates-report.html" title="Property Updates Report">
          <span class="none"></span>
        Property Updates Report</a>
            </li>
                    
      <li>
  
                          <a href="dependency-updates-report.html" title="Dependency Updates Report">
          <span class="none"></span>
        Dependency Updates Report</a>
            </li>
                    
      <li>
  
                          <a href="plugin-updates-report.html" title="Plugin Updates Report">
          <span class="none"></span>
        Plugin Updates Report</a>
            </li>
              </ul>
        </li>
            </ul>
                
                    
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <h1>Nazgul Core: Persistence API</h1>
<p>The Nazgul Core: Persistence API defines a simplified API containing common operations used in working with persistent entities. As indicated within the Nazgul Core: Persistence Model project, Entity classes combine JPA and JAXB specifications to create entities that can be persisted (typically to a database using JPA or SQL) and also marshalled (typically to a web service using JAXB and XML/JSON).</p>
<p>The Nazgul Core: Persistence API provides a set of specifications which simplify the common persistence operations used with Entity classes (i.e. create, read, update and delete or &#x201c;CRUD&#x201d;). Typically, integration service implementations should use pre-defined NamedQuery bindings to fire frequently occurring <a class="externalLink" href="http://en.wikipedia.org/wiki/Java_Persistence_Query_Language">JPQL</a> queries against the database.</p>
<p>JPQL queries can use either a <i>very</i> verbose compile-checked API to ensure that the named parameters or queries are not misspelled, or the non-typechecked and string-based (&#x201c;don&#x2019;t misspell or you will notice only in integration testing&#x201d;) approach to defining queries and parameters for the named queries. The Nazgul Core: Persistence API provides a middle ground - providing type checking to some degree while not being extremely verbose.</p>
<div class="section">
<div class="section">
<div class="section">
<h4><a name="Example:_Using_JpaPersistenceOperations_and_ParameterMapBuilder"></a>Example: Using JpaPersistenceOperations and ParameterMapBuilder</h4>
<p><img src="images/nazgul_core_reactor.png" style="float:right; margin:10px; border: 1px solid black; width:50%; height:50%;" alt="" /> The PersistenceOperations specification provides a simplified interface to a combination of common JPA and persistence operations. Typically, its standard implementation <tt>JpaPersistenceOperations</tt> is sufficient for use in all types of application. Since JPA NamedQueries can either use named parameters or posititional parameters, the JPA-related operations come in two flavours - one for the positional parameters where arguments are represented as a List, and one for the named parameters where arguments are represented as a Map.</p>
<p>While one can certainly create a Map from scratch by any means possible, the ParameterMapBuilder helper class can simplify creating the parameter Map using a builder-type pattern:</p>

<div>
<pre class="brush: java">

    // Create the JpaPersistenceOperations, working on a supplied EntityManager
    final EntityManager theEntityManager = ...
    final JpaPersistenceOperations jpa = new JpaPersistenceOperations(theEntityManager);

    // Create the parameter map
    final Map&lt;String, Object&gt; params = ParameterMapBuilder
        .with(&quot;firstName&quot;, &quot;Lenn%&quot;)
        .with(&quot;lastName&quot;, &quot;J%&quot;)
        .build();

    // Fire the query; retrieve the results
    final int maxNumResults = 64;
    final String namedQuery = &quot;getPeopleByFirstNameAndLastName&quot;;
    final List&lt;NamedParametersPerson&gt; result = jpa.fireNamedQueryWithResultLimit(namedQuery, maxNumResults, params);
</pre></div>
<p>The example above is really verbose in the interest of clarity - but it can also be shrunk considerably, should the developer want to be more consise:</p>

<div>
<pre class="brush: java">

    // Create the JpaPersistenceOperations, working on a supplied EntityManager
    final EntityManager theEntityManager = ...

    // Fire the query, return the results
    final List&lt;NamedParametersPerson&gt; result = new JpaPersistenceOperations(theEntityManager)
        .fireNamedQueryWithResultLimit(
            &quot;getPeopleByFirstNameAndLastName&quot;,
            64,
            ParameterMapBuilder.with(&quot;firstName&quot;, &quot;Lenn%&quot;).with(&quot;lastName&quot;, &quot;J%&quot;).build());

</pre></div></div></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                                                          
<script type="text/javascript">SyntaxHighlighter.all()</script>
                          </div>

        
                </div>
    </footer>
        </body>
</html>
